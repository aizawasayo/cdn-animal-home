(self.webpackChunkanimal_home_beta=self.webpackChunkanimal_home_beta||[]).push([[90,3968],{81150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},43304:function(e,t,n){n(82109)({target:"Object",stat:!0},{is:n(81150)})},12033:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n(21914),r=n(14367),s=n(16198),l=n(4367),i=(n(35666),n(20629)),o=n(4191),c={name:"DesignAdd",data:function(){return{valid:!1,newDesign:{name:"",type:"",photoSrc:[],content:""},typeList:[{label:"衣服",key:"clothingDesign",icon:"theme"},{label:"帽子",key:"hatDesign",icon:"hat"},{label:"图案",key:"patternDesign",icon:"pattern"}],formRules:{require:[function(e){return!!e||"不能为空！"}]},uploadList:[],breadNav:[{text:"首页",disabled:!1,href:"/"},{text:"设计分享",disabled:!1,href:"/design"},{text:"发布我的设计",disabled:!0,href:"/design/add"}],tips:"本页面用于动森玩家分享DIY设计(服装/帽子/图案均可)，图片格式接受jpg或png。"}},computed:(0,l.Z)({},(0,i.Se)(["userId"])),methods:{submit:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.addForm.validate()){t.next=20;break}return e.newDesign.user=e.userId,t.prev=2,t.next=5,e.commonApi.multiUpload(e.uploadList);case 5:return e.newDesign.photoSrc=t.sent,t.next=8,(0,o.FD)(e.newDesign);case 8:n=t.sent,$Vue.$dialogLoader.showSnackbar(n.message,{color:"success"}),e.commonApi.resetForm(e),e.$router.push("/design"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0),$Vue.$dialogLoader.showSnackbar(t.t0.message,{color:"error"});case 18:t.next=22;break;case 20:e.valid=!1,$Vue.$dialogLoader.showSnackbar("信息有误，请重新填写！",{color:"error"});case 22:case"end":return t.stop()}}),t,null,[[2,14]])})))()}}},u=n(1001),d=n(43453),m=n.n(d),p=n(63150),f=n(82102),g=n(99846),v=n(27781),b=n(46232),h=n(62877),w=n(47032),k=n(40314),x=n(34350),D=(0,u.Z)(c,(function(){var e=this,t=this,n=t.$createElement,s=t._self._c||n;return s("v-container",{staticClass:"bgWht",attrs:{"elevation-4":""}},[s(r.default,{attrs:{"bread-nav":t.breadNav}}),s(a.default,{attrs:{title:"发布我的设计",tips:t.tips,hasTip:""}}),s("v-form",{ref:"addForm",staticClass:"pa-16",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{attrs:{counter:20,rules:t.formRules.require,label:"设计名称",placeholder:"请输入",required:""},model:{value:t.newDesign.name,callback:function(e){t.$set(t.newDesign,"name",e)},expression:"newDesign.name"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-select",{attrs:{items:t.typeList,label:"类型",placeholder:"请选择","item-text":"label","item-value":"key",rules:t.formRules.require},model:{value:t.newDesign.type,callback:function(e){t.$set(t.newDesign,"type",e)},expression:"newDesign.type"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-file-input",{attrs:{accept:"image/*",label:"图片",placeholder:"请上传",multiple:"","prepend-icon":"mdi-camera",rules:t.formRules.require},on:{change:function(n){return t.commonApi.fileChange(n,e)},"click:clear":function(){return t.commonApi.clearFiles(e,"newDesign")}},model:{value:t.uploadList,callback:function(e){t.uploadList=e},expression:"uploadList"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{height:"100",label:"说明",hint:"灵感来源，设计思路等等，畅所欲言",placeholder:"请输入"},model:{value:t.newDesign.content,callback:function(e){t.$set(t.newDesign,"content",e)},expression:"newDesign.content"}})],1)],1),s("div",{staticClass:"form-btns d-flex justify-lg-space-between mt-4 mx-auto"},[s("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"primary",large:""},on:{click:t.submit}},[t._v(" 提交 ")]),s("v-btn",{attrs:{color:"secondary",large:""},on:{click:function(){return t.commonApi.resetForm(e)}}},[t._v(" 重置 ")])],1)],1)],1)}),[],!1,null,"a92d974c",null),y=D.exports;m()(D,{VBtn:p.Z,VCol:f.Z,VContainer:g.Z,VFileInput:v.Z,VForm:b.Z,VRow:h.Z,VSelect:w.Z,VTextField:k.Z,VTextarea:x.Z})}}]);