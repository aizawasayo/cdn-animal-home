"use strict";(self.webpackChunkanimal_home_beta=self.webpackChunkanimal_home_beta||[]).push([[9256,3968],{73977:function(e,i,t){t.r(i),t.d(i,{default:function(){return V}});var n=t(21914),r=t(14367),a=t(4367),s=t(42284),l=(t(74916),t(15306),t(10311)),o=t.n(l),u=t(20629),c=t(44848),p=t(72217);o().component("TimePicker",s.Z);var d={name:"TurnipAdd",data:function(){return{valid:!1,newTurnip:{price:null,user:"",exchangeType:"我有价",chooseTime:"",validTime:"",isLineup:!0,isPublic:!0,isAuto:!0,maxPeople:2,maxTime:10,contact:"SW",contactDetail:"",detail:"",psw:""},formRules:{require:[function(e){return!!e||"不能为空！"}]},breadNav:[{text:"首页",disabled:!1,href:"/"},{text:"社区",disabled:!0,href:"/community"},{text:"菜市场",disabled:!1,href:"/community/turnip"},{text:"发布我的大头菜信息",disabled:!0,href:"/community/turnip/add"}],tips:"菜市场用于村民们互助卖菜，大家可以留下自己的商店菜价等相关信息。禁止现金交易，拉私群，违规者永久封禁账号。望发布信息的各位森友遵守规则。"}},computed:(0,a.Z)((0,a.Z)({},(0,u.Se)(["userId"])),{},{isLineBL:function(){return!0===this.newTurnip.isLineup&&"我有价"===this.newTurnip.exchangeType},contact:function(){var e="直接输入12位好友编号(无需-分割)";return"SW"===this.newTurnip.contact||(e="联系方式"),e},isAutoBL:function(){return!0===this.newTurnip.isAuto},isPrice:function(){return"我有菜"!==this.newTurnip.exchangeType},isPsw:function(){return"我有价"===this.newTurnip.exchangeType&&!0===this.newTurnip.isLineup}}),methods:{submit:function(){var e=this;if(this.getTimeVal(),!this.newTurnip.validTime)return $Vue.$dialogLoader.showSnackbar("请选择截止时间",{color:"error"});this.$refs.addForm.validate()?(this.newTurnip.user=this.userId,"我有菜"===this.newTurnip.exchangeType&&(this.newTurnip.isLineup=!1,this.isPublic=!1,this.isAuto=!1),(0,c.yx)(this.newTurnip).then((function(i){$Vue.$dialogLoader.showSnackbar(i.message,{color:"success"}),e.commonApi.resetForm(e),e.$router.push("/community/turnip")})).catch((function(e){return $Vue.$dialogLoader.showSnackbar(e.message,{color:"error"})}))):(this.valid=!1,$Vue.$dialogLoader.showSnackbar("信息有误，请重新填写！",{color:"error"}))},getTimeVal:function(){var e=new Date,i=(e.getHours,e.getMinutes(),e.getSeconds(),(0,p.TD)(e));if(this.newTurnip.chooseTime){var t=this.newTurnip.chooseTime.replace("点",":");t=(t=t.replace("分",":")).replace("秒",""),i=i.substring(0,11)+t,this.newTurnip.validTime=(0,p.AB)(i)}}}},m=t(1001),T=t(43453),w=t.n(T),v=t(63150),h=t(82102),b=t(99846),f=t(46232),x=t(68978),g=t(74739),k=t(62877),L=t(61328),y=t(40314),$=t(34350),P=(0,m.Z)(d,(function(){var e=this,i=this,t=i.$createElement,a=i._self._c||t;return a("v-container",{staticClass:"bgWht",attrs:{"elevation-4":""}},[a(r.default,{attrs:{"bread-nav":i.breadNav}}),a(n.default,{attrs:{title:"发布我的大头菜信息",tips:i.tips,hasTip:""}}),a("v-form",{ref:"addForm",staticClass:"turnip-form pa-16",attrs:{"lazy-validation":""},model:{value:i.valid,callback:function(e){i.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{rules:i.formRules.require,label:"菜价",placeholder:"请输入",required:""},model:{value:i.newTurnip.price,callback:function(e){i.$set(i.newTurnip,"price",e)},expression:"newTurnip.price"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-radio-group",{attrs:{label:"交易类型",rules:i.formRules.require,row:""},model:{value:i.newTurnip.exchangeType,callback:function(e){i.$set(i.newTurnip,"exchangeType",e)},expression:"newTurnip.exchangeType"}},[a("v-radio",{attrs:{label:"我有菜",value:"我有菜"}}),a("v-radio",{attrs:{label:"我有价",value:"我有价"}})],1)],1),a("v-col",{attrs:{cols:"4"}},[a("TimePicker",{staticStyle:{width:"100%"},attrs:{type:"time",format:"HH点mm分ss秒",steps:[1,15,15],placeholder:"请选择截止时间"},model:{value:i.newTurnip.chooseTime,callback:function(e){i.$set(i.newTurnip,"chooseTime",e)},expression:"newTurnip.chooseTime"}})],1),i.isPrice?a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"mt-0 pt-0",attrs:{label:"排队模式："+(i.newTurnip.isLineup?"是":"否"),color:"primary"},model:{value:i.newTurnip.isLineup,callback:function(e){i.$set(i.newTurnip,"isLineup",e)},expression:"newTurnip.isLineup"}})],1):i._e(),i.isLineBL?a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"mt-0 pt-0",attrs:{label:"是否公开："+(i.newTurnip.isPublic?"是":"否"),color:"primary","hide-details":""},model:{value:i.newTurnip.isPublic,callback:function(e){i.$set(i.newTurnip,"isPublic",e)},expression:"newTurnip.isPublic"}})],1):i._e(),i.isLineBL?a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"mt-0 pt-0",attrs:{label:"是否自动叫号："+(i.newTurnip.isAuto?"是":"否"),color:"primary","hide-details":""},model:{value:i.newTurnip.isAuto,callback:function(e){i.$set(i.newTurnip,"isAuto",e)},expression:"newTurnip.isAuto"}})],1):i._e(),i.isLineBL&&i.isAutoBL?a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"最大登岛人数限制",type:"number"},model:{value:i.newTurnip.maxPeople,callback:function(e){i.$set(i.newTurnip,"maxPeople",e)},expression:"newTurnip.maxPeople"}})],1):i._e(),i.isLineBL&&i.isAutoBL?a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"登岛超时时间(分钟)",type:"number"},model:{value:i.newTurnip.maxTime,callback:function(e){i.$set(i.newTurnip,"maxTime",e)},expression:"newTurnip.maxTime"}})],1):i._e(),i.isPsw?i._e():a("v-col",{attrs:{cols:"4"}},[a("v-radio-group",{attrs:{label:"联系方式",row:""},model:{value:i.newTurnip.contact,callback:function(e){i.$set(i.newTurnip,"contact",e)},expression:"newTurnip.contact"}},[a("v-radio",{attrs:{label:"SW",value:"SW"}}),a("v-radio",{attrs:{label:"微信",value:"微信"}}),a("v-radio",{attrs:{label:"QQ",value:"QQ"}}),a("v-radio",{attrs:{label:"开岛密码",value:"开岛密码"}})],1)],1),i.isPsw?i._e():a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:i.newTurnip.contact,placeholder:"请输人"+i.contact,required:""},model:{value:i.newTurnip.contactDetail,callback:function(e){i.$set(i.newTurnip,"contactDetail",e)},expression:"newTurnip.contactDetail"}})],1),i.isPsw?a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"开岛密码",placeholder:"请输入",required:""},model:{value:i.newTurnip.psw,callback:function(e){i.$set(i.newTurnip,"psw",e)},expression:"newTurnip.psw"}})],1):i._e()],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{height:"100",label:"上岛说明",hint:"门票、报酬等等，需要补充的内容都填这里",placeholder:"请输入"},model:{value:i.newTurnip.detail,callback:function(e){i.$set(i.newTurnip,"detail",e)},expression:"newTurnip.detail"}})],1)],1),a("div",{staticClass:"form-btns d-flex justify-lg-space-between mt-4 mx-auto"},[a("v-btn",{staticClass:"mr-4",attrs:{disabled:!i.valid,color:"primary",large:""},on:{click:i.submit}},[i._v(" 提交 ")]),a("v-btn",{attrs:{color:"secondary",large:""},on:{click:function(){return i.commonApi.resetForm(e)}}},[i._v(" 重置 ")])],1)],1)],1)}),[],!1,null,"14ab6b5b",null),V=P.exports;w()(P,{VBtn:v.Z,VCol:h.Z,VContainer:b.Z,VForm:f.Z,VRadio:x.Z,VRadioGroup:g.Z,VRow:k.Z,VSwitch:L.Z,VTextField:y.Z,VTextarea:$.Z})}}]);